<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Agent Ritter</title>
    <link rel="stylesheet" href="style.css">
    <style>
        body {
            font-family: monospace;
            background-color: black;
            color: white;
        }
        
        .screen-container {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
        }

        .screen {
            background-color: black;
            padding: 20px;
            border: 1px solid white;
            width: 400px;
            text-align: center;
        }

        #text-display {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
        }

        .letter-box {
            background-color: green;
            color: black;
            display: inline-block;
            padding: 5px;
            margin: 2px;
            min-width: 20px;
            text-align: center;
            opacity: 0;
        }

        #cursor {
            font-weight: bold;
            color: white;
            animation: blink 1s step-start infinite;
        }

        @keyframes blink {
            50% { opacity: 0; }
        }
    </style>
</head>
<body>
    <div class="screen-container">
        <div class="screen">
            <div id="text-display"></div>
            <span id="cursor">_</span>
            <div id="enigme-section" style="display: none;">
                <p class="enigme-text">Voici votre énigme :</p>
                <p class="enigme">Je peux voler sans ailes et pleurer sans yeux. Qui suis-je ?</p>
                <input type="text" id="reponse" placeholder="Votre réponse ici...">
                <button id="valider">Valider</button>
                <p id="resultat"></p>
            </div>
            <!-- Ajout d'un canvas pour dessiner la rose fanée -->
            <canvas id="rose-fanee" width="200" height="200" style="border:1px solid #000000;"></canvas>
        </div>
    </div>

    <script>
        const text = "CONFIDENTIEL - MISSION virus BOLOSSE-21.";
        let index = 0;

        function afficherLettre() {
            const textDisplay = document.getElementById('text-display');

            if (index < text.length) {
                // Créer une case verte pour chaque lettre
                const letterBox = document.createElement('span');
                letterBox.classList.add('letter-box');
                letterBox.textContent = text[index];

                // Ajouter la lettre avec une transition progressive
                textDisplay.appendChild(letterBox);

                // Utiliser setTimeout pour créer un effet progressif
                setTimeout(() => {
                    letterBox.style.opacity = 1; // rendre la lettre visible progressivement
                }, 50 * index); // délai en fonction de l'index pour créer l'effet progressif

                index++;
                setTimeout(afficherLettre, 100); // Vitesse d'apparition des lettres
            } else {
                document.getElementById('cursor').style.display = 'none'; // Masquer le curseur quand le texte est fini
            }
        }

        window.onload = () => {
            afficherLettre(); // Lancer l'animation dès le chargement de la page
            dessinerRoseFanee(); // Appeler la fonction pour dessiner la rose fanée
        };

        // Fonction pour dessiner la rose fanée avec des points
        function dessinerRoseFanee() {
            const canvas = document.getElementById('rose-fanee');
            if (canvas.getContext) {
                const ctx = canvas.getContext('2d');

                // Vérifier la taille du canvas
                console.log("Taille du canvas:", canvas.width, canvas.height);

                // Liste des positions pour les points représentant la rose fanée
                const points = [
                    {x: 50, y: 50}, {x: 55, y: 48}, {x: 60, y: 47}, {x: 65, y: 50}, {x: 70, y: 55}, // Pétales du haut
                    {x: 65, y: 60}, {x: 60, y: 65}, {x: 55, y: 63}, {x: 50, y: 60}, {x: 45, y: 55}, // Pétales du bas
                    {x: 50, y: 70}, {x: 53, y: 75}, {x: 57, y: 80}, // Tige
                    {x: 57, y: 85}, {x: 56, y: 90}, {x: 55, y: 95}, {x: 54, y: 100} // Tige courbée (rose fanée)
                ];

                // Dessiner chaque point comme un petit cercle
                points.forEach(point => {
                    ctx.beginPath();
                    ctx.arc(point.x, point.y, 3, 0, 2 * Math.PI); // Cercle de rayon 3
                    ctx.fillStyle = 'black'; // Couleur des points
                    ctx.fill();
                    ctx.closePath();
                });
            } else {
                console.error("Le canvas n'est pas supporté par ce navigateur.");
            }
        }
    </script>
</body>
</html>
